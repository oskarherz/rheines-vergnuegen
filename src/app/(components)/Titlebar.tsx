'use client';

import { classNames } from '@rheine/(utils)/classNames';
import { useEffect, useState } from 'react';


export function Titlebar({ className }: { className?: string }) {

  const [ghostMode, setGhostMode] = useState(true);

  useEffect(() => {
    window.onscroll = () => {
      setGhostMode(!(window.scrollY > window.screen.height));
    };
    return () => { window.onscroll = null; }
  }, []);

  return (
    <div className={classNames(
      "w-full h-16 p-4", className
    )}>
      <Logo mode={ghostMode ? 'white' : 'dark'} />
    </div>
  );
}

function Logo({ mode }: { mode: 'white' | 'dark' | 'blend-difference' }) {
  
  const style = {
    white: 'text-white',
    dark: 'text-slate-800',
    'blend-difference': 'mix-blend-difference'
  }[mode];

  return (
    <svg
      width="48"
      height="48"
      viewBox="0 0 48 48"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={style}>
      <path
        d="M20.0781 28.8906C20.0781 29.776 20.0885 30.5521 20.1094 31.2188C20.1406 31.875 20.1719 32.4427 20.2031 32.9219C20.2448 33.401 20.2917 33.8021 20.3438 34.125C20.4062 34.4479 20.4688 34.7188 20.5312 34.9375V35H16.7812V34.9375C16.8438 34.7188 16.901 34.4479 16.9531 34.125C17.0156 33.8021 17.0625 33.401 17.0938 32.9219C17.1354 32.4427 17.1667 31.875 17.1875 31.2188C17.2188 30.5625 17.2344 29.7865 17.2344 28.8906V18.7188C17.2344 17.8333 17.2188 17.0625 17.1875 16.4062C17.1667 15.7396 17.1354 15.1667 17.0938 14.6875C17.0625 14.2083 17.0156 13.8073 16.9531 13.4844C16.901 13.151 16.8438 12.875 16.7812 12.6562V12.5938L17.4375 12.6562C17.6354 12.6771 17.8542 12.6927 18.0938 12.7031C18.3438 12.7031 18.599 12.7031 18.8594 12.7031C19.2656 12.7031 19.8125 12.6562 20.5 12.5625C21.1979 12.4583 22.0833 12.4062 23.1562 12.4062C24.1562 12.4062 25.0781 12.5417 25.9219 12.8125C26.776 13.0833 27.5156 13.4792 28.1406 14C28.7656 14.5208 29.25 15.1615 29.5938 15.9219C29.9479 16.6719 30.125 17.526 30.125 18.4844C30.125 19.2344 30.026 19.9323 29.8281 20.5781C29.6406 21.2135 29.3698 21.7917 29.0156 22.3125C28.6719 22.8333 28.2552 23.2969 27.7656 23.7031C27.276 24.099 26.7292 24.4323 26.125 24.7031L31.6094 32.4062C31.8802 32.7917 32.1302 33.125 32.3594 33.4062C32.599 33.6875 32.8229 33.9323 33.0312 34.1406C33.25 34.3385 33.4583 34.5052 33.6562 34.6406C33.8542 34.7656 34.0573 34.8646 34.2656 34.9375V35H29.75C29.7188 34.8021 29.6146 34.5417 29.4375 34.2188C29.2708 33.8854 29.0729 33.5573 28.8438 33.2344L23.3125 25.4375C23.0729 25.4583 22.8333 25.4792 22.5938 25.5C22.3542 25.5104 22.1094 25.5156 21.8594 25.5156C21.5677 25.5156 21.2708 25.5052 20.9688 25.4844C20.6771 25.4635 20.3802 25.4271 20.0781 25.375V28.8906ZM20.0781 24.1562C20.3594 24.2188 20.6458 24.2656 20.9375 24.2969C21.2292 24.3177 21.5104 24.3281 21.7812 24.3281C22.5625 24.3281 23.276 24.2135 23.9219 23.9844C24.5677 23.7448 25.1146 23.3854 25.5625 22.9062C26.0208 22.4271 26.375 21.8333 26.625 21.125C26.875 20.4062 27 19.5677 27 18.6094C27 17.8281 26.9115 17.1198 26.7344 16.4844C26.5573 15.849 26.2917 15.3125 25.9375 14.875C25.5938 14.4271 25.1562 14.0833 24.625 13.8438C24.0938 13.5938 23.474 13.4688 22.7656 13.4688C22.0469 13.4688 21.474 13.5052 21.0469 13.5781C20.6198 13.651 20.2969 13.7292 20.0781 13.8125V24.1562Z"
        fill="currentColor" />
      <rect
        x="5"
        y="5"
        width="38"
        height="38"
        rx="19"
        stroke="currentColor"
        strokeWidth="2"/>
    </svg>
  );
}
